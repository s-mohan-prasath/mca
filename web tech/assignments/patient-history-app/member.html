<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MEMBERS | PSGCT LIBRARY</title>
    <link rel="stylesheet" href="./styles/global.css">
    <link rel="stylesheet" href="./styles/member.css">
</head>

<body>
    <nav class="navbar">
        <div class="logo">PSGCT LIB</div>
        <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="member.html">Member SignUp</a></li>
            <li><a href="add-book.html">Add Books</a></li>
            <li><a href="BooksIssued.html">Summary</a></li>
        </ul>
    </nav>
    <div class="container" id="membercontainer" style="display: flex;flex-direction: column;align-items: center;">
        <h1 style="margin-bottom: 60px;">Member SignUp</h1>
        <form action="" method="post" id="memberForm">
            <div class="form-group">
                <label for="name">Name</label>
                <input type="text" id="name" maxlength="30" placeholder="Enter Name" required>
            </div>
            <div class="form-group">
                <label for="email">Aadhar Number</label>
                <input type="text" id="aadhar" placeholder="Enter Aadhar Number" required onblur="validateAadhar()">
                <span id="aadhar-error" style="color: red; display: none;">Invalid Aadhar</span>
            </div>
            <div class="form-group">
                <label for="member">Member ID</label>
                <input type="text" id="member" placeholder="Enter Member ID" required onblur="validateMember()">
                <span id="member-error" style="color: red; display: none;">Invalid Member ID</span>
            </div>
            <div class="form-group">
                <label for="select-age">Age</label>
                <select id="select-age" class="styled-select" onblur="validateAge()">
                    <option value="0">select age</option>
                </select>
                <span id="select-age-error" style="color: red; display: none;">Age is required</span>
            </div>
            <center style="margin-top: 120px;">
                <input type="submit" value="SIGNUP">
            </center>
        </form>
    </div>
    <script>
        function validateAadhar() {
            const aadharInput = document.getElementById('aadhar');
            const aadharError = document.getElementById('aadhar-error');
            const aadharPattern = /[^a-zA-Z!@#$%&*`~]{12}/;

            if (!aadharPattern.test(aadharInput.value)) {
                aadharError.style.display = 'block';
                return false;
            } else {
                aadharError.style.display = 'none';
                return true;
            }
        }
        function validateMember() {
            const memberInput = document.getElementById('member');
            const memberError = document.getElementById('member-error');
            const memberPattern = /[a-zA-Z]{2}[\d]{4}/;

            if (!memberPattern.test(memberInput.value)) {
                memberError.style.display = 'block';
                return false;
            } else {
                memberError.style.display = 'none';
                return true;
            }
        }
        function validateAge() {
            const ageInput = document.getElementById('select-age');
            const memberError = document.getElementById('select-age-error');
            const memberPattern = /[a-zA-Z]{2}[\d]{4}/;

            if (ageInput.value==0) {
                memberError.style.display = 'block';
                return false;
            } else {
                memberError.style.display = 'none';
                return true;
            }
        }


        // ADD OPTIONS TO THE AGE
        var selectAgeInput = document.getElementById("select-age")
        for(let i = 16;i<150;i++){
            selectAgeInput.insertAdjacentHTML("beforeend",`<option value="${i}">${i}</option>`)
        }

        // FORM SUBMISSION

        var memberForm = document.getElementById("memberForm")
        memberForm.addEventListener("submit", (event) => {
            event.preventDefault()
            var clickeButton = event.target;

            if(!validateAadhar() && !validateMember() && !validateAge()){
                return false;
            }

            var name = document.getElementById("name").value
            var aadhar = document.getElementById("aadhar").value
            var member_id = document.getElementById("member").value
            var age = document.getElementById("select-age").value
            localStorage.setItem("name",name)
            localStorage.setItem("aadhar",aadhar)
            localStorage.setItem("member_id",member_id)
            localStorage.setItem("age",age)

            memberForm.style.display = 'none';
            var membercontainer = document.getElementById("membercontainer")
            membercontainer.insertAdjacentHTML("beforeend","<h2 style='color:green;'>Member SignUp Successfullüëç</h2>")
        })
   
   </script>
</body>

</html>